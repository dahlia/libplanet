<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Libplanet changelog | Libplanet </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Libplanet changelog | Libplanet ">
    <meta name="generator" content="docfx 2.40.12.0">
    
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="stylesheet" href="styles/docfx.vendor.css">
    <link rel="stylesheet" href="styles/docfx.css">
    <link rel="stylesheet" href="styles/main.css">
    <meta property="docfx:navrel" content="toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="index.html">
                <img id="logo" class="svg" src="images/logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="libplanet-changelog">Libplanet changelog</h1>

<h2 id="version-022">Version 0.2.2</h2>
<p>Released on ...</p>
<h2 id="version-021">Version 0.2.1</h2>
<p>Released on April 7, 2019.</p>
<p>This version purposes to entirely replace <em>0.2.0</em>, because a wrong <em>.nupkg</em>
file was uploaded to <em>0.2.0</em> on NuGet Gallery.  Note that <em>0.2.0</em> on NuGet
Gallery was unlisted.</p>
<h2 id="version-020">Version 0.2.0</h2>
<p>Released on April 5, 2019.</p>
<ul>
<li><p><code>PrivateKey.Decrypt()</code> now throws an <code>InvalidCiphertextException</code>
instead of returning <code>null</code> when <code>cipherText</code> is invalid.  [<a href="https://github.com/planetarium/libplanet/pull/140">#140</a>]</p>
</li>
<li><p><code>Transaction&lt;T&gt;</code>'s <code>Sender</code>–<code>Recipient</code> model was replaced by
<code>Signer</code>–<code>UpdatedAddresses</code> model.   Unlike cryptocurrencies,
transactions in games are not necessarily a transfer of assets,
so it is difficult to determine what type of assert is transferred
or who will receives the asset.  A more useful perspective is,
like what kind of transformation is performed, or what states
are changed.  To be close to this perspective, we decided to
get rid of <code>Transaction&lt;T&gt;.Recipient</code> (which is singular) and
have <code>Transaction&lt;T&gt;.UpdatedAddresses</code> (which is plural) instead.
As there is no more asset to transfer, the term <code>Sender</code> was also
renamed to <code>Signer</code>, which fits more to the new perspective.
[<a href="https://github.com/planetarium/libplanet/pull/121">#121</a>]</p>
<ul>
<li>Renamed <code>Transaction&lt;T&gt;.Sender</code>, <code>RawTransaction.Signer</code>, and
<code>IActionContext.From</code> properties to <code>Signer</code>.
The corresponding parameter names on constructors and
methods were also renamed too.</li>
<li>Old <code>Transaction&lt;T&gt;.Make()</code> factory method is replaced by
new <code>Transaction&lt;T&gt;.Create()</code> factory method.  The <code>timestamp</code> parameter
became optional, and the new optional <code>updatedAddresses</code> parameter was
added.</li>
<li>Removed <code>IActionContext.To</code> property.</li>
<li><code>Transaction&lt;T&gt;.Recipient</code> and <code>RawTransaction.Recipient</code> properties
were replaced by <code>Transaction&lt;T&gt;.UpdatedAddresses</code> and
<code>RawTransaction.UpdatedAddresses</code> properties.
The corresponding parameter names on constructors and methods were
replaced too.</li>
<li>Since the schema of <code>RawTransaction</code> class was changed,
the serialization format of transactions and blocks were also changed.
It affects to the way to generate <code>Transaction&lt;T&gt;.Signature</code>,
<code>Transaction&lt;T&gt;.Id</code>, and <code>Block.Hash</code> values as well.</li>
<li>Added <code>InvalidTxUpdatedAddressesException</code> exception class.</li>
<li>A nullary overload of <code>Block&lt;T&gt;.Validate()</code> method was gone
so that the block validation API is always time-wise.
Instead, <code>Block&lt;T&gt;.Validate()</code> method now has only one overload:
<code>Validate(DateTimeOffset, AccountStateGetter)</code> returning
<code>IAccountStateDelta</code>.</li>
<li><code>Block&lt;T&gt;.Validate()</code> and <code>BlockChain&lt;T&gt;.Validate()</code> methods now can
throw an <code>InvalidTxUpdateAddressesException</code>.</li>
</ul>
</li>
<li><p>The <code>Address</code>es <code>IAction</code> tries to update no more need to be manually
coded using <code>IAction.RequestStates()</code> method.  That method was
removed at all, and updated <code>Address</code>es became automatically determined
(for the most cases) by track &quot;dirties&quot; on <dfn>rehearsal mode<dfn>.
This mode dry-runs <code>IAction</code>s with empty <code>IActionContext.PreviousStates</code>.
[<a href="https://github.com/planetarium/libplanet/pull/121">#121</a>]<p>
<ul>
<li>Added <code>AccountStateGetter</code> delegate to provide a read-only view to
account states.</li>
<li>Added <code>IAccountStateDelta</code> interface to replace <code>AddressStateMap</code>.
The interface purposes to provide a read-write view to account states
with maintaining <code>UpdatedAddresses</code> (so-called &quot;dirty&quot;).
[<a href="https://github.com/planetarium/libplanet/issues/98">#98</a>]</li>
<li>The type of <code>IActionContext.PreviousStates</code> property was changed from
<code>AddressStateMap</code> to <code>IAccountStateDelta</code>.</li>
<li>Added <code>IActionContext.Rehearsal</code> property.  [<a href="https://github.com/planetarium/libplanet/issues/131">#131</a>, <a href="https://github.com/planetarium/libplanet/pull/135">#135</a>]</li>
<li>Added <code>UnexpectedlyTerminatedTxRehearsalException</code> class.
[<a href="https://github.com/planetarium/libplanet/issues/132">#132</a>, <a href="https://github.com/planetarium/libplanet/pull/136">#136</a>]</li>
<li>The return type of <code>IAction.Execute()</code> method was changed from
<code>AddressStateMap</code> to <code>IAccountStateDelta</code>.</li>
<li>Removed <code>IAction.RequestStates()</code> method because there is no need for it
and thus it is not used anymore.</li>
<li>Added <code>Transaction&lt;T&gt;.EvaluateActions()</code> method.</li>
<li>Added <code>Block&lt;T&gt;.EvaluateActions()</code> generator method.</li>
</ul>
</dfn></dfn></li>
<li><p>The built-in subtype polymorphism of <code>IAction</code> and <code>Transaction&lt;T&gt;</code> was
moved to a separated new <code>PolymorphicAction&lt;T&gt;</code> abstract class.
Polymorphic actions now should be wrapped by <code>PolymorphicAction&lt;T&gt;</code>.
For example, the following code:</p>
<pre><code class="lang-csharp">public abstract class AbstractAction : IAction { ... }

[ActionType(&quot;attack&quot;)]
public sealed class Attack : AbstractAction { ... }

[ActionType(&quot;sleep&quot;)]
public sealed class Sleep : AbstractAction { ... }
</code></pre>
<pre><code class="lang-csharp">var tx = Transaction&lt;AbstractAction&gt;.Create(
    ...,
    actions: new[] { new Attack(...), ... }
);
</code></pre>
<p>should be changed to like:</p>
<pre><code class="lang-csharp">var tx = Transaction&lt;PolymorphicAction&lt;AbstractAction&gt;&gt;.Create(
    ...,
    actions: new[] {
        new PolymorphicAction&lt;AbstractAction&gt;(new Attack(...)),
        ...
    }
);
</code></pre>
<p>It can be simpler by implicit casting:</p>
<pre><code class="lang-csharp">var tx = Transaction&lt;PolymorphicAction&lt;AbstractAction&gt;&gt;.Create(
    ...,
    actions: new PolymorphicAction&lt;AbstractAction&gt;[] { new Attack(...), }
);
</code></pre>
<p>[<a href="https://github.com/planetarium/libplanet/pull/169">#169</a>]</p>
<ul>
<li>The type parameter <code>T</code> of <code>Transaction&lt;T&gt;</code>, <code>Block&lt;T&gt;</code>, and
<code>BlockChain&lt;T&gt;</code> became to require having a <code>public</code> parameterless
constructor (i.e., <code>new()</code>) besides implementing <code>IAction</code> interface.
This means an <code>abstract class</code> or an <code>interface</code> no more can be passed
to <code>T</code>, but only a concrete <code>class</code> or a <code>struct</code> can be passed.</li>
</ul>
</li>
<li><p>Fixed a bug that mutating a collection of <code>IAction</code>s passed to
constructors or factory methods of <code>Transaction&lt;T&gt;</code> had affected
made instances as well.
The type of <code>Transaction&lt;T&gt;.Actions</code> property was changed from
<code>IList&lt;T&gt;</code> to <code>IImmutableList&lt;T&gt;</code>.  The corresponding parameters on
constructors and factory methods also were changed to take
<code>IEnumerable&lt;T&gt;</code> instead of <code>IList&lt;T&gt;</code>.</p>
</li>
<li><p><code>Address</code> and <code>TxId</code> are now serializable.
[<a href="https://github.com/planetarium/libplanet/issues/99">#99</a>, <a href="https://github.com/planetarium/libplanet/pull/124">#124</a> by Qria]</p>
</li>
<li><p><code>InvalidTxException</code> and its subclasses became to have <code>TxId</code> property
and the corresponding constructor parameter.  This can be useful when
multiple <code>Transaction&lt;T&gt;</code> objects are validated at once.</p>
</li>
<li><p>Added <code>Address.Size</code> constant, which is fixed to the <code>Int32</code> 20.</p>
</li>
<li><p>Fixed a bug that <code>Block&lt;T&gt;.Validate()</code> had not thrown <code>InvalidTxException</code>
even if there is any integrity error on its <code>Transactions</code>.</p>
</li>
<li><p>Improved the write throughput of <code>BlockChain&lt;T&gt;</code> while polling
<code>BlockChain&lt;T&gt;.GetStates()</code></p>
</li>
<li><p><code>Swarm.AddPeersAsync()</code> was fixed so that unreachable <code>Peer</code>s are ignored.
[<a href="https://github.com/planetarium/libplanet/pull/128">#128</a>]</p>
</li>
<li><p><code>Swarm</code> became able to relay their connection via TURN (<a href="https://tools.ietf.org/html/rfc5766">RFC 5766</a>)
to NAT traversal. To enable this, its constructor (<code>Swarm()</code>) takes the
newly added <code>IceServer</code>s as configuration.</p>
</li>
<li><p>Since we decided to depend on TURN (<a href="https://tools.ietf.org/html/rfc5766">RFC 5766</a>) and STUN (<a href="https://tools.ietf.org/html/rfc5389">RFC 5389</a>) to
work around NAT so that <code>Peer</code>'s endpoints don't have to be multiple,
<code>Peer.Urls</code> was renamed to <code>Peer.EndPoint</code> and its type also was changed
from <code>IImmutableList&lt;Uri&gt;</code> to <code>DnsEndPoint</code>.
[<a href="https://github.com/planetarium/libplanet/issues/120">#120</a>, <a href="https://github.com/planetarium/libplanet/pull/123">#123</a> by Yang Chun Ung, <a href="https://github.com/planetarium/libplanet/issues/126">#126</a>, <a href="https://github.com/planetarium/libplanet/pull/127">#127</a>, <a href="https://github.com/planetarium/libplanet/issues/165">#165</a>, [#166]]</p>
</li>
<li><p><code>Swarm</code> became to ignore tip blocks of the same height (<code>Index</code>) that it
already has and deal with only longer (higher) blocks.</p>
</li>
<li><p>Fixed a bug that occured when <code>Swarm</code> was handling multiple responses at the
same time.</p>
</li>
<li><p>Fixed a bug that the <code>Swarm</code> constructor had hanged in certain runtimes
like Unity engine.</p>
</li>
<li><p>Removed <code>AddressTransactionSet</code> which handles handle <code>Address</code> to
<code>IEnumerable&lt;TxId&gt;</code> indices, and the following methods in <code>IStore</code>:</p>
<ul>
<li><code>IStore.IterateAddresses()</code></li>
<li><code>IStore.GetAddressTransactionIds()</code></li>
<li><code>IStore.AppendAddressTransactionId()</code></li>
<li><code>IStore.CountAddresses()</code></li>
</ul>
</li>
<li><p>Added <code>IStore.ListNamespaces()</code> method.</p>
</li>
<li><p><code>IStore.CountBlocks()</code> and <code>IStore.CountTransactions()</code> became to return
<code>long</code>.</p>
</li>
<li><p>Block/tx-related methods in <code>IStore</code> and <code>BaseIndex&lt;T&gt;</code> no longer
accepts <code>@namespace</code> parameter.  It means that even if a forking occurs, the
same block/tx files are shared.</p>
</li>
<li><p>Fixed a bug that made unnecessary fork when receiving blocks from other
peer.</p>
</li>
<li><p>Action classes that implement <code>IAction</code> but lack <code>ActionTypeAttribute</code>
became reported by <code>PolymorphicAction&lt;T&gt;</code> throwing
<code>MissingActionTypeException</code> at runtime.  [<a href="https://github.com/planetarium/libplanet/issues/28">#28</a>, <a href="https://github.com/planetarium/libplanet/pull/144">#144</a>, <a href="https://github.com/planetarium/libplanet/pull/169">#169</a>]</p>
</li>
<li><p>Turn into parameter in <code>BlockPolicy</code>'s constructor to milliseconds. [<a href="https://github.com/planetarium/libplanet/pull/151">#151</a>]</p>
</li>
<li><p><code>BencodexFormatter</code> became able to serialize <code>BigInteger</code>.  [<a href="https://github.com/planetarium/libplanet/pull/159">#159</a>]</p>
</li>
<li><p>Made <code>Swarm</code> possible to configure its network <code>appProtocolVersion</code> and,
to ignore peers if their version is different.  [<a href="https://github.com/planetarium/libplanet/issues/167">#167</a>], [<a href="https://github.com/planetarium/libplanet/pull/170">#170</a>]</p>
</li>
<li><p>Added <code>IActionContext.Miner</code> property.  [<a href="https://github.com/planetarium/libplanet/issues/173">#173</a>], [<a href="https://github.com/planetarium/libplanet/pull/174">#174</a>]</p>
</li>
<li><p>Renamed <code>Block&lt;T&gt;.RewardBeneficiary</code> to <code>Block&lt;T&gt;.Miner</code>.  [<a href="https://github.com/planetarium/libplanet/pull/174">#174</a>]</p>
</li>
<li><p>Added <code>BlockChain&lt;T&gt;.Blocks</code> property.  [<a href="https://github.com/planetarium/libplanet/pull/176">#176</a>]</p>
</li>
<li><p>Added <code>BlockChain&lt;T&gt;.Transactions</code> property.  [<a href="https://github.com/planetarium/libplanet/pull/176">#176</a>]</p>
</li>
</ul>
<h2 id="version-011">Version 0.1.1</h2>
<p>Released on March 5, 2019.</p>
<ul>
<li>Improved stability of <code>Swarm</code> and <code>SwarmTest</code>.</li>
</ul>
<h2 id="version-010">Version 0.1.0</h2>
<p>Initial release.  Released on February 26, 2019.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/dahlia/libplanet/blob/bd5f15f719463460b6b0ebe402304b5a7e01cf1e/CHANGES.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            Copyright © 2019 <a href="https://planetariumhq.com/">Planetarium</a><br>Generated by DocFX
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="styles/docfx.js"></script>
    <script type="text/javascript" src="styles/main.js"></script>
  </body>
</html>
